{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react'\nimport styles from './styles.module.css'\n\nconst cubeStylesGenerator = (animationDuration) => {\n  return {\n    scene: {\n      width: '100%',\n      height: '100%',\n      border: '1px solid #CCC',\n      perspective: '1000000px',\n      transform: 'scale(1)'\n    },\n    cube: {\n      // width: '100vw',\n      // height: '100vh',\n      // position: 'relative',\n      // transformStyle: 'preserve-3d',\n      // transform: 'translateZ(-100vh)',\n      transition:\n        'all cubic-bezier(0.34, 1.56, 0.64, 1) ' +\n        animationDuration / 1000 +\n        's ' +\n        animationDuration / 2000 +\n        's'\n    },\n    cubeFace: {\n      width: '100vw',\n      height: '100vh',\n      position: 'absolute',\n      transition:\n        'all ' +\n        animationDuration / 1000 +\n        's ' +\n        animationDuration / 2000 +\n        's'\n    },\n    'show-front': { transform: 'translateZ(-100vh) rotateY(   0deg);' },\n    'show-right': { transform: 'translateZ(-100vh) rotateY( -90deg);' },\n    'show-back': { transform: 'translateZ(-100vh) rotateY(-180deg);' },\n    'show-left': { transform: 'translateZ(-100vh) rotateY(  90deg);' },\n    'show-top': { transform: 'translateZ(-100vh) rotateX( -90deg);' },\n    'show-bottom': { transform: 'translateZ(-100vh) rotateX(  90deg);' },\n    'cube__face--front': (disp = 50) => {\n      return { transform: 'rotateY(  0deg) translateZ(' + disp + 'vh)' }\n    },\n    'cube__face--right': (disp = 50) => {\n      return { transform: 'rotateY( 90deg) translateZ(' + disp + 'vw)' }\n    },\n    'cube__face--back': (disp = 50) => {\n      return { transform: 'rotateY(180deg) translateZ(' + disp + 'vh)' }\n    },\n    'cube__face--left': (disp = 50) => {\n      return { transform: 'rotateY(-90deg) translateZ(' + disp + 'vw)' }\n    },\n    'cube__face--top': (disp = 50) => {\n      return { transform: 'rotateX( 90deg) translateZ(' + disp + 'vh)' }\n    },\n    'cube__face--bottom': (disp = 50) => {\n      return { transform: 'rotateX(270deg) translateZ(' + disp + 'vh)' }\n    }\n  }\n}\n\nconst zoomOutAnimation = [\n  { transform: 'scale(1)', perspective: 1000000 },\n  { transform: 'scale(0.60)', perspective: 5000 },\n  { transform: 'scale(0.70)', perspective: 5000 },\n  { transform: 'scale(1)', perspective: 1000000 }\n]\n\nexport class CubeTransition extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      currentFace: 'front',\n      animationDuration: props.animationSpeed || 1000\n    }\n\n    this.sceneRef = React.createRef()\n    this.cubeAnimation = null\n\n    this._renderChildren = this._renderChildren.bind(this)\n  }\n\n  componentDidUpdate() {\n    this.sceneRef.current.animate(\n      zoomOutAnimation,\n      this.state.animationDuration * 1.9\n    )\n    this.sceneRef.current.style.animationTimingFunction =\n      'cubic-bezier(0.68, -0.6, 0.32, 1.6)'\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // You don't have to do this check first, but it can help prevent an unneeded render\n    if (nextProps.face !== this.state.currentFace) {\n      this.setState({ currentFace: nextProps.face })\n    }\n\n    if (nextProps.animationDuration !== this.state.animationSpeed) {\n      this.setState({ animationDuration: nextProps.animationDuration })\n    }\n  }\n\n  render() {\n    const cubeStyles = cubeStylesGenerator(this.state.animationDuration)\n    return (\n      <div\n        ref={this.sceneRef}\n        className={[styles.scene, '', this.props.className].join(' ')}\n      >\n        <div /* style={{...cubeStyles.cube, ...cubeStyles[\"show-\"+this.state.currentFace]}} */\n          style={{ ...cubeStyles.cube }}\n          className={[\n            styles.cube,\n            styles['show-' + this.state.currentFace]\n          ].join(' ')}\n        >\n          {this._renderChildren()}\n          {this._renderContent()}\n        </div>\n      </div>\n    )\n  }\n\n  _renderChildren() {\n    const cubeStyles = cubeStylesGenerator(this.state.animationDuration)\n    const resizeCube = ['back', 'front', 'top', 'bottom'].includes(\n      this.state.currentFace\n    )\n      ? {\n          width: '100vh',\n          transform: 'rotateY({{deg}}) translateZ({{translateZ}})',\n          transition: 'width ' + this.state.animationDuration / 1000 + 's'\n        }\n      : false\n    return ['back', 'front', 'left', 'right', 'top', 'bottom'].map(\n      (side, index) => {\n        let deg\n        let translateZ\n        if (side === 'left') {\n          deg = '-90deg'\n          translateZ = '50vh'\n        } else if (side === 'right') {\n          deg = '90deg'\n          translateZ = 'calc(100vw - 50vh)'\n        }\n\n        let sideFaceStyle\n        if (resizeCube && ['left', 'right'].includes(side)) {\n          sideFaceStyle = { ...resizeCube }\n          sideFaceStyle.transform = resizeCube.transform\n            .replace('{{deg}}', deg)\n            .replace('{{translateZ}}', translateZ)\n        } else {\n          sideFaceStyle = {}\n        }\n\n        const finalStyles = {\n          ...cubeStyles.cubeFace,\n          ...cubeStyles['cube__face--' + side](),\n          ...(this.props[side + 'CSS'] || {}),\n          ...sideFaceStyle\n        }\n\n        return <div key={index} style={finalStyles} />\n      }\n    )\n  }\n\n  _renderContent() {\n    const cubeStyles = cubeStylesGenerator(this.state.animationDuration)\n    const resizeCube = ['back', 'front', 'top', 'bottom'].includes(\n      this.state.currentFace\n    )\n      ? {\n          width: '100vh',\n          transform: 'rotateY({{deg}}) translateZ({{translateZ}})',\n          transition: 'width ' + this.state.animationDuration / 1000 + 's'\n        }\n      : false\n\n    return ['back', 'front', 'left', 'right', 'top', 'bottom'].map(\n      (side, index) => {\n        let deg\n        let translateZ\n        if (side === 'left') {\n          deg = '-90deg'\n          translateZ = '50vh'\n        } else if (side === 'right') {\n          deg = '90deg'\n          translateZ = 'calc(100vw - 50vh)'\n        }\n\n        let sideFaceStyle\n        if (resizeCube && ['left', 'right'].includes(side)) {\n          sideFaceStyle = { ...resizeCube }\n          sideFaceStyle.transform = resizeCube.transform\n            .replace('{{deg}}', deg)\n            .replace('{{translateZ}}', translateZ)\n        } else {\n          sideFaceStyle = {}\n        }\n\n        const contentStyles = {\n          ...cubeStyles.cubeFace,\n          ...cubeStyles['cube__face--' + side](\n            this.props.contentElevation + 50\n          ),\n          ...{ sideFaceStyle }\n        }\n\n        return (\n          <div key={index} style={contentStyles}>\n            {this.props[side + 'Page']}\n          </div>\n        )\n      }\n    )\n  }\n}\n\n// export const ExampleComponent = ({ text }) => {\n//   return <div className={styles.test}>Example Component: {text}</div>\n// }\n"],"names":["cubeStylesGenerator","animationDuration","scene","width","height","border","perspective","transform","cube","transition","cubeFace","position","disp","zoomOutAnimation","CubeTransition","props","state","currentFace","animationSpeed","sceneRef","React","createRef","cubeAnimation","_renderChildren","bind","componentDidUpdate","current","animate","style","animationTimingFunction","componentWillReceiveProps","nextProps","face","setState","render","cubeStyles","styles","className","join","_renderContent","resizeCube","includes","map","side","index","deg","translateZ","sideFaceStyle","replace","finalStyles","contentStyles","contentElevation","PureComponent"],"mappings":"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"}